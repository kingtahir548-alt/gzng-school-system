<!DOCTYPE html>
<html lang="ku" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¨Û•Ø¯ÙˆØ§Ø¯Ø§Ú†ÙˆÙˆÙ†ÛŒ Ú†Ø§Ù„Ø§Ú©ÛŒÛŒÛ•Ú©Ø§Ù†ÛŒ Ù‚ÙˆØªØ§Ø¨Ø®Ø§Ù†Û•</title>
    <!-- Ù„Û†Ø¯Ú©Ø±Ø¯Ù†ÛŒ Tailwind CSS Ø¨Û† Ø¯ÛŒØ²Ø§ÛŒÙ† -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@400;700&display=swap');
        body {
            font-family: 'Noto Sans Arabic', sans-serif;
            background-color: #f7f9fb;
        }
        /* Ø¯ÛŒØ²Ø§ÛŒÙ†ÛŒ Ø³Û•Ø±Û•Ú©ÛŒ Ø¨Û† Ù†Ø§ÙˆÛ•Ú•Û†Ú© */
        #app-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        /* Ø³Ú•ÛŒÙ†Û•ÙˆÛ•ÛŒ Ø¯ÛŒÙÛ†ÚµØªÛŒ Ù…Û†Ø¯ÛŒÙˆÚµ (Ø¨Û† Ø¦Û•ÙˆÛ•ÛŒ Ú©Û†Ø¯ Ù†Û•ÛŒÛ•ØªÛ• Ø³Û•Ø± Ø´Ø§Ø´Û•) */
        script[type="module"] { display: none; }
    </style>
</head>
<body>

    <div id="app-container" class="space-y-6">
        
        <!-- Ø¨Û•Ø´ÛŒ Ø³Û•Ø±Û•Ú©ÛŒ -->
        <header class="bg-blue-600 text-white p-6 rounded-xl shadow-lg">
            <h1 class="text-3xl font-bold mb-2">ğŸ“’ Ø¨Û•Ø¯ÙˆØ§Ø¯Ø§Ú†ÙˆÙˆÙ†ÛŒ Ú†Ø§Ù„Ø§Ú©ÛŒ Ù‚ÙˆØªØ§Ø¨Ø®Ø§Ù†Û•</h1>
            <p class="text-blue-200">Ù‡Û•Ù…ÙˆÙˆ Ø¨Û•Ú©Ø§Ø±Ù‡ÛÙ†Û•Ø±Ø§Ù† Ø¯Û•ØªÙˆØ§Ù†Ù† Ú†Ø§Ù„Ø§Ú©ÛŒ Ø²ÛŒØ§Ø¯ Ø¨Ú©Û•Ù†. Ø³Ú•ÛŒÙ†Û•ÙˆÛ• ØªÛ•Ù†Ù‡Ø§ Ø¨Û† Ø¦Û•Ø¯Ù…ÛŒÙ† Ú•ÛÚ¯Û•Ù¾ÛØ¯Ø±Ø§ÙˆÛ•.</p>
            <div id="user-info" class="text-sm mt-3 border-t border-blue-500 pt-2">
                <span class="font-semibold">IDÛŒ Ø¨Û•Ú©Ø§Ø±Ù‡ÛÙ†Û•Ø±: </span><span id="current-user-id">Ú†Ø§ÙˆÛ•Ú•ÛÛŒ Ú†ÙˆÙˆÙ†Û•Ú˜ÙˆÙˆØ±Û•ÙˆÛ•...</span>
            </div>
        </header>

        <!-- ÙÛ†Ø±Ù…ÛŒ Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ú†Ø§Ù„Ø§Ú©ÛŒ -->
        <div class="bg-white p-6 rounded-xl shadow-md">
            <h2 class="text-xl font-semibold mb-4 text-gray-700">Ú†Ø§Ù„Ø§Ú©ÛŒÛŒÛ•Ú©ÛŒ Ù†ÙˆÛ Ø²ÛŒØ§Ø¯ Ø¨Ú©Û•</h2>
            <div class="flex flex-col md:flex-row space-y-3 md:space-y-0 md:space-x-4">
                <input type="text" id="activity-input" placeholder="Ù†Ø§ÙˆÙ†ÛŒØ´Ø§Ù†ÛŒ Ú†Ø§Ù„Ø§Ú©ÛŒÛŒÛ•Ú©Û• Ø¨Ù†ÙˆÙˆØ³Û• (Ø¨Û† Ù†Ù…ÙˆÙˆÙ†Û•: Ú©Û†Ú©Ø±Ø¯Ù†Û•ÙˆÛ•ÛŒ Ú©ØªÛØ¨)" 
                       class="flex-grow p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-right">
                <button onclick="handleActivitySubmission()"
                        class="bg-green-500 text-white p-3 rounded-lg font-semibold hover:bg-green-600 transition duration-200 shadow-md">
                    + Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†
                </button>
            </div>
        </div>

        <!-- Ù„ÛŒØ³ØªÛŒ Ú†Ø§Ù„Ø§Ú©ÛŒÛŒÛ•Ú©Ø§Ù† -->
        <div class="mt-8">
            <h2 class="text-2xl font-bold mb-4 text-gray-800">ğŸ“œ Ù„ÛŒØ³ØªÛŒ Ú†Ø§Ù„Ø§Ú©ÛŒÛŒÛ•Ú©Ø§Ù† (Ú•Ø§Ø³ØªÛ•ÙˆØ®Û†)</h2>
            <div id="activities-list" class="space-y-3">
                <!-- Ú†Ø§Ù„Ø§Ú©ÛŒÛŒÛ•Ú©Ø§Ù† Ù„ÛØ±Û• Ø¨Û• Ú©Û†Ø¯ÛŒ JavaScript Ø¨Ø§Ø± Ø¯Û•Ú©Ø±ÛÙ† -->
                <p class="text-gray-500 p-4 bg-white rounded-lg shadow-sm">Ú†Ø§ÙˆÛ•Ú•ÛÛŒ Ø¨Ø§Ø±Ú©Ø±Ø¯Ù†ÛŒ Ú†Ø§Ù„Ø§Ú©ÛŒÛŒÛ•Ú©Ø§Ù†...</p>
            </div>
        </div>

    </div>

    <!-- âš ï¸ Ú¯Ø±Ù†Ú¯: Ø¦Û•Ù… Ø¨Û•Ø´Û•ÛŒ Ø®ÙˆØ§Ø±Û•ÙˆÛ• Ø¨Û•Ø´ÛŒ JavaScript Ùˆ FirebaseÛ• -->
    <script type="module">
        
        // âš ï¸ Ø²Ø§Ù†ÛŒØ§Ø±ÛŒÛŒÛ•Ú©Ø§Ù†ÛŒ Ù¾ÛÙˆÛŒØ³Øª: Ø¦Û•Ù… Ø³Û Ú¯Û†Ú•Ø§ÙˆÛ• Ù¾ÛØ´ Ø¯Û•Ø³ØªÙ¾ÛÚ©Ø±Ø¯Ù†ÛŒ Firebase Ù¾ÛÙˆÛŒØ³ØªÙ†

        // 1. Ø²Ø§Ù†ÛŒØ§Ø±ÛŒ Ù¾Ú•Û†Ú˜Û•ÛŒ Firebase (Ú©Û†Ø¯Û•Ú©Û•ÛŒ ØªÛ†)
        const firebaseConfig = {
          apiKey: "AIzaSyBSj0nAlAbnaWEUp5z3ujKyttuSCLjio6A",
          authDomain: "gzng-fc080.firebaseapp.com",
          projectId: "gzng-fc080",
          storageBucket: "gzng-fc080.firebasestorage.app",
          messagingSenderId: "1044033765196",
          appId: "1:1044033765196:web:7a80b7f5e94eaffb8ed9e9",
          measurementId: "G-C6PSBZJ0F4"
        };

        // 2. Ø¦ÛŒÙ…Û•ÛŒÚµÛŒ Ø¦Û•Ø¯Ù…ÛŒÙ† (Ø¦Û•ÙˆÛ•ÛŒ Ù…Ø§ÙÛŒ Ø³Ú•ÛŒÙ†Û•ÙˆÛ•ÛŒ Ù‡Û•ÛŒÛ•)
        const ALLOWED_ADMIN_EMAIL = 'tahirtahir0509@gmail.com'; 

        // 3. Ø¯Û†Ù…Û•ÛŒÙ†ÛŒ Ù…Ø§Ù…Û†Ø³ØªØ§ÛŒØ§Ù† (Ø¦Û•Ú¯Û•Ø± Ù‡Û•Ù…ÙˆÙˆ Ù…Ø§Ù…Û†Ø³ØªØ§Ú©Ø§Ù† Ø¯Û†Ù…Û•ÛŒÙ†ÛÚ©ÛŒØ§Ù† Ù‡Û•Ø¨ÛØª)
        const TEACHER_DOMAIN = ''; 

        // âš ï¸ Ú¯Ø±Ù†Ú¯: Ù…Û†Ø¯ÛŒÙˆÚµÛ•Ú©Ø§Ù†ÛŒ Firebase Ø¨Û† HTML
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, onSnapshot, doc, addDoc, deleteDoc, query } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Ø¯Û•Ø³ØªÙ¾ÛÚ©Ø±Ø¯Ù†ÛŒ Firebase Ùˆ Ø®Ø²Ù…Û•ØªÚ¯ÙˆØ²Ø§Ø±ÛŒÛŒÛ• Ø³Û•Ø±Û•Ú©ÛŒÛŒÛ•Ú©Ø§Ù†
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app); // Ø®Ø²Ù…Û•ØªÚ¯ÙˆØ²Ø§Ø±ÛŒ Firestore
        const auth = getAuth(app);    // Ø®Ø²Ù…Û•ØªÚ¯ÙˆØ²Ø§Ø±ÛŒ Authentication

        let userId = null; // IDÛŒ Ø¨Û•Ú©Ø§Ø±Ù‡ÛÙ†Û•Ø±ÛŒ Ø¦ÛØ³ØªØ§

        // ----------------------------------------------------------------------
        // Ø¨Û•Ø´ÛŒ UI (Ú•ÙˆÙˆÚ©Ø§Ø±ÛŒ Ø¨Û•Ú©Ø§Ø±Ù‡ÛÙ†Û•Ø±)
        // ----------------------------------------------------------------------

        function updateUserInfo(uid, email) {
            const userIdElement = document.getElementById('current-user-id');
            if (userIdElement) {
                // ØªÛ•Ù†Ù‡Ø§ Ù¨ Ù¾ÛŒØªÛŒ ÛŒÛ•Ú©Û•Ù…ÛŒ IDÛŒ Ù†ÛŒØ´Ø§Ù† Ø¯Û•Ø¯Û•ÛŒÙ† Ø¨Û† Ú©ÙˆØ±ØªÚ©Ø±Ø¯Ù†Û•ÙˆÛ•
                userIdElement.textContent = `${uid.substring(0, 8)}... (${email || 'Ù†Û•Ù†Ø§Ø³Ø±Ø§Ùˆ'})`;
            }
        }
        
        // ----------------------------------------------------------------------
        // Ø¨Û•Ø´ÛŒ Firestore Data Load & Render
        // ----------------------------------------------------------------------

        function renderActivities(activities) {
            const listElement = document.getElementById('activities-list');
            if (!listElement) return;

            listElement.innerHTML = ''; // Ù¾Ø§Ú©Ú©Ø±Ø¯Ù†Û•ÙˆÛ•ÛŒ Ù„ÛŒØ³ØªÛŒ Ø¦ÛØ³ØªØ§

            if (activities.length === 0) {
                listElement.innerHTML = `<p class="text-gray-500 p-4 bg-white rounded-lg shadow-sm">Ù‡ÛŒÚ† Ú†Ø§Ù„Ø§Ú©ÛŒÛŒÛ•Ú© ØªÛ†Ù…Ø§Ø± Ù†Û•Ú©Ø±Ø§ÙˆÛ•.</p>`;
                return;
            }

            activities.forEach(activity => {
                const isUserAdmin = auth.currentUser?.email === ALLOWED_ADMIN_EMAIL;
                const activityId = activity.id;
                
                // Ø¯Ø±ÙˆØ³ØªÚ©Ø±Ø¯Ù†ÛŒ Ú©Ø§Ø±Ø¯ÛŒ Ú†Ø§Ù„Ø§Ú©ÛŒÛŒÛ•Ú©Û•
                const activityCard = document.createElement('div');
                activityCard.className = 'flex justify-between items-center bg-white p-4 rounded-xl shadow-md mb-3 transition hover:shadow-lg';
                
                // Ø¨Û•Ø´ÛŒ Ø¯Û•Ù‚ Ùˆ Ø²Ø§Ù†ÛŒØ§Ø±ÛŒÛŒÛ•Ú©Ø§Ù†
                const infoDiv = document.createElement('div');
                const activityDate = new Date(activity.timestamp).toLocaleDateString('ku-IQ', {
                    year: 'numeric', month: 'short', day: 'numeric'
                });
                infoDiv.innerHTML = `
                    <p class="text-gray-800 text-lg">${activity.text}</p>
                    <p class="text-sm text-gray-500 mt-1">
                        Ù„Û•Ù„Ø§ÛŒÛ•Ù†: ${activity.creatorEmail || 'Ø¨Û•Ú©Ø§Ø±Ù‡ÛÙ†Û•Ø±' + activity.creatorId.substring(0, 4)}
                        - Ú©Ø§Øª: ${activityDate}
                    </p>
                `;
                activityCard.appendChild(infoDiv);

                // Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ø¯ÙˆÚ¯Ù…Û•ÛŒ Ø³Ú•ÛŒÙ†Û•ÙˆÛ• Ø¦Û•Ú¯Û•Ø± Ø¦Û•Ø¯Ù…ÛŒÙ† Ø¨ÛØª
                if (isUserAdmin) {
                    const deleteButton = document.createElement('button');
                    deleteButton.innerHTML = 'ğŸ—‘ï¸ Ø³Ú•ÛŒÙ†Û•ÙˆÛ•';
                    deleteButton.className = 'ml-4 px-3 py-1 bg-red-500 text-white rounded-lg hover:bg-red-600 transition duration-150 text-sm font-semibold whitespace-nowrap';
                    deleteButton.onclick = () => deleteActivity(activityId);
                    activityCard.appendChild(deleteButton);
                }
                
                listElement.appendChild(activityCard);
            });
        }
        
        /**
         * Ø¨Ø§Ø±Ú©Ø±Ø¯Ù†ÛŒ Ú†Ø§Ù„Ø§Ú©ÛŒÛŒÛ•Ú©Ø§Ù† Ø¨Û• Ø´ÛÙˆÛ•ÛŒ Ú•Ø§Ø³ØªÛ•ÙˆØ®Û† (onSnapshot)
         */
        function loadActivities() {
            const activitiesCollection = collection(db, "activities");
            
            // Ø¯Ø§Ù†Ø§Ù†ÛŒ Ú¯ÙˆÛÚ¯Ø±ØªÙ†ÛÚ©ÛŒ Ú•Ø§Ø³ØªÛ•ÙˆØ®Û†
            onSnapshot(activitiesCollection, (snapshot) => {
                const activities = [];
                snapshot.forEach((doc) => {
                    // ÙˆÛ•Ø±Ú¯Ø±ØªÙ†ÛŒ IDÛŒ Ø¯Û†Ú©ÛŒÙˆÙ…ÛÙ†Øª Ø¨Û† Ø³Ú•ÛŒÙ†Û•ÙˆÛ•ÛŒ Ø¯ÙˆØ§ØªØ±
                    activities.push({ id: doc.id, ...doc.data() });
                });
                
                // Ú•ÛŒØ²Ú©Ø±Ø¯Ù† Ø¨Û•Ù¾ÛÛŒ Ú©Ø§Øª (Ù†ÙˆÛØªØ±ÛŒÙ† Ù„Û• Ù¾ÛØ´Û•ÙˆÛ•)
                activities.sort((a, b) => b.timestamp - a.timestamp); 
                
                renderActivities(activities);
            }, (error) => {
                console.error("Ù‡Û•ÚµÛ• Ù„Û• Ø¨Ø§Ø±Ú©Ø±Ø¯Ù†ÛŒ Ú†Ø§Ù„Ø§Ú©ÛŒÛŒÛ•Ú©Ø§Ù†: ", error);
                document.getElementById('activities-list').innerHTML = `<p class="text-red-500 p-4 bg-red-100 rounded-lg">Ù‡Û•ÚµÛ• Ù„Û• Ø¨Ø§Ø±Ú©Ø±Ø¯Ù†ÛŒ Ú†Ø§Ù„Ø§Ú©ÛŒÛŒÛ•Ú©Ø§Ù†: ${error.message}</p>`;
            });
        }

        // ----------------------------------------------------------------------
        // Ø¨Û•Ø´ÛŒ Authentication
        // ----------------------------------------------------------------------

        // Ø¯Û•Ø³ØªÙ¾ÛÚ©Ø±Ø¯Ù†ÛŒ Ú†ÙˆÙˆÙ†Û•Ú˜ÙˆÙˆØ±Û•ÙˆÛ•ÛŒ Ù†Û•Ù†Ø§Ø³Ø±Ø§Ùˆ Ùˆ Ø¯ÛŒØ§Ø±ÛŒÚ©Ø±Ø¯Ù†ÛŒ Ú¯Û†Ú•Ø§Ù†Ú©Ø§Ø±ÛŒÛŒÛ•Ú©Ø§Ù†ÛŒ Ø¨Û•Ú©Ø§Ø±Ù‡ÛÙ†Û•Ø±
        onAuthStateChanged(auth, (user) => {
            if (user) {
                // Ø¨Û•Ú©Ø§Ø±Ù‡ÛÙ†Û•Ø± Ú†ÙˆÙˆÙ†Û•Ú˜ÙˆÙˆØ±Û•ÙˆÛ•ÛŒ Ú©Ø±Ø¯ÙˆÙˆÛ•
                userId = user.uid;
                updateUserInfo(user.uid, user.email);
                
                // Ø¨Ø§Ù†Ú¯Ú©Ø±Ø¯Ù†ÛŒ ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ø¨Ø§Ø±Ú©Ø±Ø¯Ù†ÛŒ Ú†Ø§Ù„Ø§Ú©ÛŒÛŒÛ•Ú©Ø§Ù† ØªÛ•Ù†Ù‡Ø§ Ø¯ÙˆØ§ÛŒ Ø¯ÚµÙ†ÛŒØ§Ø¨ÙˆÙˆÙ†Û•ÙˆÛ• Ù„Û• ID
                loadActivities(); 

            } else {
                // Ø¨Û•Ú©Ø§Ø±Ù‡ÛÙ†Û•Ø± Ú†ÙˆÙˆÙ†Û•Ú˜ÙˆÙˆØ±Û•ÙˆÛ•ÛŒ Ù†Û•Ú©Ø±Ø¯ÙˆÙˆÛ•ØŒ Ø¨Û• Ù†Û•Ù†Ø§Ø³Ø±Ø§ÙˆÛŒ Ø¨Ú†Û†Ø±Û• Ú˜ÙˆÙˆØ±Û•ÙˆÛ•
                signInAnonymously(auth)
                    .then((credential) => {
                        console.log("Ú†ÙˆÙˆÙ†Û•Ú˜ÙˆÙˆØ±Û•ÙˆÛ•ÛŒ Ù†Û•Ù†Ø§Ø³Ø±Ø§Ùˆ Ø¨Û• Ø³Û•Ø±Ú©Û•ÙˆØªÙˆÙˆÛŒÛŒ Ø¦Û•Ù†Ø¬Ø§Ù…Ø¯Ø±Ø§.");
                        userId = credential.user.uid;
                        updateUserInfo(userId, null);
                        loadActivities(); 
                    })
                    .catch((error) => {
                        console.error("Ù‡Û•ÚµÛ• Ù„Û• Ú†ÙˆÙˆÙ†Û•Ú˜ÙˆÙˆØ±Û•ÙˆÛ•ÛŒ Ù†Û•Ù†Ø§Ø³Ø±Ø§ÙˆØ¯Ø§:", error);
                        document.getElementById('activities-list').innerHTML = `<p class="text-red-500 p-4 bg-red-100 rounded-lg">Ù†Ø§ØªÙˆØ§Ù†Ø±ÛØª Ø¨Ú†ÛØªÛ• Ú˜ÙˆÙˆØ±Û•ÙˆÛ•. ØªÚ©Ø§ÛŒÛ• Ù¾Ø´Ú©Ù†ÛŒÙ†ÛŒ ÛŒØ§Ø³Ø§Ú©Ø§Ù†ÛŒ ÙØ§ÛŒÛ•Ø±Ø¨Û•ÛŒØ³ Ø¨Ú©Û•.</p>`;
                    });
            }
        });

        // ----------------------------------------------------------------------
        // Ø¨Û•Ø´ÛŒ Firestore Actions
        // ----------------------------------------------------------------------

        /**
         * Ú©Û†Ù†ØªØ±Û†ÚµÚ©Ø±Ø¯Ù†ÛŒ Ù†Ø§Ø±Ø¯Ù†ÛŒ ÙÛ†Ø±Ù…ÛŒ Ú†Ø§Ù„Ø§Ú©ÛŒ
         */
        window.handleActivitySubmission = function() {
            const inputElement = document.getElementById('activity-input');
            const activityText = inputElement.value.trim();

            if (activityText.length > 0) {
                addActivity(activityText)
                    .then(() => {
                        inputElement.value = ''; // Ù¾Ø§Ú©Ú©Ø±Ø¯Ù†Û•ÙˆÛ•ÛŒ Ø®Ø§Ù†Û•Ú©Û•
                    });
            } else {
                console.warn("ØªÚ©Ø§ÛŒÛ• Ø¯Û•Ù‚ Ø¨Û† Ú†Ø§Ù„Ø§Ú©ÛŒÛŒÛ•Ú©Û• Ø¨Ù†ÙˆÙˆØ³Û•.");
            }
        }
        
        /**
         * Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ú†Ø§Ù„Ø§Ú©ÛŒÛŒÛ•Ú©ÛŒ Ù†ÙˆÛ
         * @param {string} activityText - Ø¯Û•Ù‚ÛŒ Ú†Ø§Ù„Ø§Ú©ÛŒÛŒÛ•Ú©Û•.
         */
        async function addActivity(activityText) {
            if (!userId) {
                console.warn("Ù‡ÛØ´ØªØ§ Ø¨Û•Ú©Ø§Ø±Ù‡ÛÙ†Û•Ø± Ø¦Ø§Ù…Ø§Ø¯Û• Ù†ÛŒÛŒÛ• Ø¨Û† Ù†ÙˆÙˆØ³ÛŒÙ†.");
                return;
            }
            
            try {
                // Ù†Ø§ÙˆÛŒ Ú©Û†Ù„ÛÚ©Ø´Ù†Û•Ú©Û• 'activities'Û•
                const docRef = await addDoc(collection(db, "activities"), {
                    text: activityText,
                    timestamp: Date.now(),
                    creatorId: userId,
                    creatorEmail: auth.currentUser?.email || null // Ù„Û•ÙˆØ§Ù†Û•ÛŒÛ• Ù†Û•Ù†Ø§Ø³Ø±Ø§Ùˆ Ø¨ÛØª Ø¨Û†ÛŒÛ• null Ø¯Û•Ù†ÛÛŒÙ†
                });
                console.log("Ú†Ø§Ù„Ø§Ú©ÛŒ Ø²ÛŒØ§Ø¯ Ú©Ø±Ø§ Ø¨Û• ID:", docRef.id);
            } catch (e) {
                console.error("Ù‡Û•ÚµÛ• Ù„Û• Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ú†Ø§Ù„Ø§Ú©ÛŒØ¯Ø§: ", e);
                alert("Ù‡Û•ÚµÛ• Ù„Û• Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ú†Ø§Ù„Ø§Ú©ÛŒØ¯Ø§. Ú•Û•Ù†Ú¯Û• ÛŒØ§Ø³Ø§Ú©Ø§Ù†ÛŒ Ù†ÙˆÙˆØ³ÛŒÙ† Ú©ÛØ´Û•ÛŒØ§Ù† Ù‡Û•Ø¨ÛØª.");
            }
        }

        /**
         * Ø³Ú•ÛŒÙ†Û•ÙˆÛ•ÛŒ Ú†Ø§Ù„Ø§Ú©ÛŒÛŒÛ•Ú© (ØªÛ•Ù†Ù‡Ø§ Ø¨Û† Ø¦Û•Ø¯Ù…ÛŒÙ†)
         * @param {string} activityId - IDÛŒ Ø¯Û†Ú©ÛŒÙˆÙ…ÛÙ†ØªÛ•Ú©Û•.
         */
        window.deleteActivity = async function(activityId) {
            const currentUserEmail = auth.currentUser?.email;

            if (currentUserEmail !== ALLOWED_ADMIN_EMAIL) {
                // Ù„Û•Ø¨Ø±ÛŒ alert() Ú©Û• Ù„Û• Ú©Û†Ø¯ÛŒ Ø³Û•Ø±Û•Ú©ÛŒ Ú•ÛÚ¯Û•Ù¾ÛÙ†Û•Ø¯Ø±Ø§ÙˆÛ•ØŒ Ù„Û• Ú©Û†Ù†Ø³Û†ÚµØ¯Ø§ Ø¨ÛŒÙ†ÙˆÙˆØ³ÛŒÙ†
                console.error("ØªÛ•Ù†Ù‡Ø§ Ø¦Û•Ø¯Ù…ÛŒÙ† Ù…Ø§ÙÛŒ Ø³Ú•ÛŒÙ†Û•ÙˆÛ•ÛŒ Ù‡Û•ÛŒÛ•.");
                return;
            }

            // Ù„ÛØ±Û•Ø¯Ø§ Ø¯Û•ØªÙˆØ§Ù†ÛŒØª Ø¯ÛŒØ§Ù„Û†Ú¯ÛÚ©ÛŒ Ø³Ú•ÛŒÙ†Û•ÙˆÛ•ÛŒ (Modal) Ø¯Ø±ÙˆØ³Øª Ø¨Ú©Û•ÛŒØª
            if (confirm("Ø¯ÚµÙ†ÛŒØ§ÛŒ Ù„Û• Ø³Ú•ÛŒÙ†Û•ÙˆÛ•ÛŒ Ø¦Û•Ù… Ú†Ø§Ù„Ø§Ú©ÛŒÛŒÛ•ØŸ")) {
                try {
                    await deleteDoc(doc(db, "activities", activityId));
                    console.log("Ú†Ø§Ù„Ø§Ú©ÛŒÛ•Ú©Û• Ø³Ú•Ø§ÛŒÛ•ÙˆÛ•.");
                } catch (e) {
                    console.error("Ù‡Û•ÚµÛ• Ù„Û• Ø³Ú•ÛŒÙ†Û•ÙˆÛ•Ø¯Ø§: ", e);
                }
            }
        }

    </script>
</body>
</html>
